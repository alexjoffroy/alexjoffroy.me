---
title: "Laravel: Ã©vitez la fonction env() en dehors des fichiers de config"
seo_title: "Laravel: Ã©vitez la fonction env() en dehors des fichiers de config"
seo_description: "Pourquoi vous ne devriez pas utiliser de variables d'environnement en dehors des fichiers de config dans Laravel"
---
Dans Laravel, le fichier `.env` permet facilement de renseigner toutes les valeurs dynamiques et personnelles telles que les identifiants de connexion Ã  la base de donnÃ©es ou les clÃ©s d'API. Vous pouvez ajouter n'importe quelle clÃ© dans ce fichier pour vos dÃ©veloppements.

Par exemple, imaginons que l'on veut utiliser une API externe pour rÃ©cupÃ©rer des chatons dans notre appli, et que nous avons besoin d'une clÃ© pour utiliser cette API. On peut l'ajouter Ã  notre `.env`:
```
KITTENS_SECRET_KEY=a1b2c3d4e5
```

Ensuite, Ã  l'endroit oÃ¹ nous voulons appeler l'API, on peut retrouver cette clÃ©:
```php
// app/Services/Kittens.php

$key = env('KITTENS_SECRET_KEY');

// Fetch the API with curl or Guzzle or whatever you want
```

Maintenant que nous avons une jolie appli affichant des chatons, que faire pour dÃ©ployer en production ? 

Si vous avez dÃ©jÃ  lu la  [section deploiement](https://laravel.com/docs/5.6/deployment) de la documentation, vous savez que vous pouvez optimiser votre appli avec quelques commandes `artisan.

L'une d'entre elles, `php artisan config:cache`, met en cache les valeurs de configuration.

Elle va aussi casser l'appli. Pourquoi ? Car, mÃªme si ce n'est pas forcÃ©ment Ã©vident, une fois que la configuration est cachÃ©e, **le fichier `.env` ne sera plus chargÃ© et tous les appels Ã  la fonction `env`retourneront null** .

Si on reprend notre exemple:
```php
// app/Services/Kittens.php

$key = env('KITTEN_API_SECRET_KEY'); // This will be null
```

Pour corriger cela, il suffit d'appeler `env` uniquement dans les fichiers de config
```php
// config/kittens.php

return [

    'secret_key' => env('KITTENS_SECRET_KEY')
		
];
```

Ensuite utilisez la fonction `config` au lieu de `env`:
```php
// app/Services/Kittens.php

$key = config('kittens.secret_key');

// Fetch the API with curl or Guzzle or whatever you want
```

Maintenant, notre config peut-Ãªtre cachÃ©e sans casser l'appli ðŸŽ‰